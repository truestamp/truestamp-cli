import { didYouMeanOption, didYouMeanType, getFlag } from "./_utils.ts";
export class FlagsError extends Error {
    constructor(message) {
        super(message);
        Object.setPrototypeOf(this, FlagsError.prototype);
    }
}
export class UnknownRequiredOption extends FlagsError {
    constructor(option, options) {
        super(`Unknown required option "${getFlag(option)}".${didYouMeanOption(option, options)}`);
        Object.setPrototypeOf(this, UnknownRequiredOption.prototype);
    }
}
export class UnknownConflictingOption extends FlagsError {
    constructor(option, options) {
        super(`Unknown conflicting option "${getFlag(option)}".${didYouMeanOption(option, options)}`);
        Object.setPrototypeOf(this, UnknownConflictingOption.prototype);
    }
}
export class UnknownType extends FlagsError {
    constructor(type, types) {
        super(`Unknown type "${type}".${didYouMeanType(type, types)}`);
        Object.setPrototypeOf(this, UnknownType.prototype);
    }
}
export class ValidationError extends FlagsError {
    constructor(message) {
        super(message);
        Object.setPrototypeOf(this, ValidationError.prototype);
    }
}
export class DuplicateOption extends ValidationError {
    constructor(name) {
        super(`Option "${getFlag(name).replace(/^--no-/, "--")}" can only occur once, but was found several times.`);
        Object.setPrototypeOf(this, DuplicateOption.prototype);
    }
}
export class InvalidOption extends ValidationError {
    constructor(option, options) {
        super(`Invalid option "${getFlag(option)}".${didYouMeanOption(option, options)}`);
        Object.setPrototypeOf(this, InvalidOption.prototype);
    }
}
export class UnknownOption extends ValidationError {
    constructor(option, options) {
        super(`Unknown option "${getFlag(option)}".${didYouMeanOption(option, options)}`);
        Object.setPrototypeOf(this, UnknownOption.prototype);
    }
}
export class MissingOptionValue extends ValidationError {
    constructor(option) {
        super(`Missing value for option "${getFlag(option)}".`);
        Object.setPrototypeOf(this, MissingOptionValue.prototype);
    }
}
export class InvalidOptionValue extends ValidationError {
    constructor(option, expected, value) {
        super(`Option "${getFlag(option)}" must be of type "${expected}", but got "${value}".`);
        Object.setPrototypeOf(this, InvalidOptionValue.prototype);
    }
}
export class OptionNotCombinable extends ValidationError {
    constructor(option) {
        super(`Option "${getFlag(option)}" cannot be combined with other options.`);
        Object.setPrototypeOf(this, OptionNotCombinable.prototype);
    }
}
export class ConflictingOption extends ValidationError {
    constructor(option, conflictingOption) {
        super(`Option "${getFlag(option)}" conflicts with option "${getFlag(conflictingOption)}".`);
        Object.setPrototypeOf(this, ConflictingOption.prototype);
    }
}
export class DependingOption extends ValidationError {
    constructor(option, dependingOption) {
        super(`Option "${getFlag(option)}" depends on option "${getFlag(dependingOption)}".`);
        Object.setPrototypeOf(this, DependingOption.prototype);
    }
}
export class MissingRequiredOption extends ValidationError {
    constructor(option) {
        super(`Missing required option "${getFlag(option)}".`);
        Object.setPrototypeOf(this, MissingRequiredOption.prototype);
    }
}
export class RequiredArgumentFollowsOptionalArgument extends ValidationError {
    constructor(arg) {
        super(`An required argument cannot follow an optional argument, but "${arg}"  is defined as required.`);
        Object.setPrototypeOf(this, RequiredArgumentFollowsOptionalArgument.prototype);
    }
}
export class ArgumentFollowsVariadicArgument extends ValidationError {
    constructor(arg) {
        super(`An argument cannot follow an variadic argument, but got "${arg}".`);
        Object.setPrototypeOf(this, ArgumentFollowsVariadicArgument.prototype);
    }
}
export class NoArguments extends ValidationError {
    constructor() {
        super(`No arguments.`);
        Object.setPrototypeOf(this, NoArguments.prototype);
    }
}
export class InvalidTypeError extends ValidationError {
    constructor({ label, name, value, type }, expected) {
        super(`${label} "${name}" must be of type "${type}", but got "${value}".` + (expected
            ? ` Expected values: ${expected.map((value) => `"${value}"`).join(", ")}`
            : ""));
        Object.setPrototypeOf(this, MissingOptionValue.prototype);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiX2Vycm9ycy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIl9lcnJvcnMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLGdCQUFnQixFQUFFLGNBQWMsRUFBRSxPQUFPLEVBQUUsTUFBTSxhQUFhLENBQUM7QUFHeEUsTUFBTSxPQUFPLFVBQVcsU0FBUSxLQUFLO0lBQ25DLFlBQVksT0FBZTtRQUN6QixLQUFLLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDZixNQUFNLENBQUMsY0FBYyxDQUFDLElBQUksRUFBRSxVQUFVLENBQUMsU0FBUyxDQUFDLENBQUM7SUFDcEQsQ0FBQztDQUNGO0FBRUQsTUFBTSxPQUFPLHFCQUFzQixTQUFRLFVBQVU7SUFDbkQsWUFBWSxNQUFjLEVBQUUsT0FBNEI7UUFDdEQsS0FBSyxDQUNILDRCQUE0QixPQUFPLENBQUMsTUFBTSxDQUFDLEtBQ3pDLGdCQUFnQixDQUFDLE1BQU0sRUFBRSxPQUFPLENBQ2xDLEVBQUUsQ0FDSCxDQUFDO1FBQ0YsTUFBTSxDQUFDLGNBQWMsQ0FBQyxJQUFJLEVBQUUscUJBQXFCLENBQUMsU0FBUyxDQUFDLENBQUM7SUFDL0QsQ0FBQztDQUNGO0FBRUQsTUFBTSxPQUFPLHdCQUF5QixTQUFRLFVBQVU7SUFDdEQsWUFBWSxNQUFjLEVBQUUsT0FBNEI7UUFDdEQsS0FBSyxDQUNILCtCQUErQixPQUFPLENBQUMsTUFBTSxDQUFDLEtBQzVDLGdCQUFnQixDQUFDLE1BQU0sRUFBRSxPQUFPLENBQ2xDLEVBQUUsQ0FDSCxDQUFDO1FBQ0YsTUFBTSxDQUFDLGNBQWMsQ0FBQyxJQUFJLEVBQUUsd0JBQXdCLENBQUMsU0FBUyxDQUFDLENBQUM7SUFDbEUsQ0FBQztDQUNGO0FBRUQsTUFBTSxPQUFPLFdBQVksU0FBUSxVQUFVO0lBQ3pDLFlBQVksSUFBWSxFQUFFLEtBQW9CO1FBQzVDLEtBQUssQ0FBQyxpQkFBaUIsSUFBSSxLQUFLLGNBQWMsQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFD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QUUsS0FBSyxFQUFFLElBQUksRUFBYSxFQUN2QyxRQUFpQztRQUVqQyxLQUFLLENBQ0gsR0FBRyxLQUFLLEtBQUssSUFBSSxzQkFBc0IsSUFBSSxlQUFlLEtBQUssSUFBSSxHQUFHLENBQ3BFLFFBQVE7WUFDTixDQUFDLENBQUMscUJBQ0EsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsSUFBSSxLQUFLLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQ2pELEVBQUU7WUFDRixDQUFDLENBQUMsRUFBRSxDQUNQLENBQ0YsQ0FBQztRQUNGLE1BQU0sQ0FBQyxjQUFjLENBQUMsSUFBSSxFQUFFLGtCQUFrQixDQUFDLFNBQVMsQ0FBQyxDQUFDO0lBQzVELENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRpZFlvdU1lYW5PcHRpb24sIGRpZFlvdU1lYW5UeXBlLCBnZXRGbGFnIH0gZnJvbSBcIi4vX3V0aWxzLnRzXCI7XG5pbXBvcnQgdHlwZSB7IElGbGFnT3B0aW9ucywgSVR5cGVJbmZvIH0gZnJvbSBcIi4vdHlwZXMudHNcIjtcblxuZXhwb3J0IGNsYXNzIEZsYWdzRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZykge1xuICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBGbGFnc0Vycm9yLnByb3RvdHlwZSk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFVua25vd25SZXF1aXJlZE9wdGlvbiBleHRlbmRzIEZsYWdzRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihvcHRpb246IHN0cmluZywgb3B0aW9uczogQXJyYXk8SUZsYWdPcHRpb25zPikge1xuICAgIHN1cGVyKFxuICAgICAgYFVua25vd24gcmVxdWlyZWQgb3B0aW9uIFwiJHtnZXRGbGFnKG9wdGlvbil9XCIuJHtcbiAgICAgICAgZGlkWW91TWVhbk9wdGlvbihvcHRpb24sIG9wdGlvbnMpXG4gICAgICB9YCxcbiAgICApO1xuICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBVbmtub3duUmVxdWlyZWRPcHRpb24ucHJvdG90eXBlKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgVW5rbm93bkNvbmZsaWN0aW5nT3B0aW9uIGV4dGVuZHMgRmxhZ3NFcnJvciB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbjogc3RyaW5nLCBvcHRpb25zOiBBcnJheTxJRmxhZ09wdGlvbnM+KSB7XG4gICAgc3VwZXIoXG4gICAgICBgVW5rbm93biBjb25mbGljdGluZyBvcHRpb24gXCIke2dldEZsYWcob3B0aW9uKX1cIi4ke1xuICAgICAgICBkaWRZb3VNZWFuT3B0aW9uKG9wdGlvbiwgb3B0aW9ucylcbiAgICAgIH1gLFxuICAgICk7XG4gICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIFVua25vd25Db25mbGljdGluZ09wdGlvbi5wcm90b3R5cGUpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBVbmtub3duVHlwZSBleHRlbmRzIEZsYWdzRXJyb3Ige1xuICBjb25zdHJ1Y3Rvcih0eXBlOiBzdHJpbmcsIHR5cGVzOiBBcnJheTxzdHJpbmc+KSB7XG4gICAgc3VwZXIoYFVua25vd24gdHlwZSBcIiR7dHlwZX1cIi4ke2RpZFlvdU1lYW5UeXBlKHR5cGUsIHR5cGVzKX1gKTtcbiAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgVW5rbm93blR5cGUucHJvdG90eXBlKTtcbiAgfVxufVxuXG4vKiBWYWxpZGF0aW9uIGVycm9ycy4gKi9cblxuLyoqXG4gKiBBIHZhbGlkYXRpb24gZXJyb3IgaXMgdGhyb3duIHdoZW4gdGhlIGNvbW1hbmQgaXMgd3JvbmdseSB1c2VkIGJ5IHRoZSB1c2VyLlxuICogRm9yIGV4YW1wbGU6IElmIHRoZSB1c2VyIHBhc3NlcyBzb21lIGludmFsaWQgb3B0aW9ucyBvciBhcmd1bWVudHMgdG8gdGhlXG4gKiBjb21tYW5kLlxuICovXG5leHBvcnQgY2xhc3MgVmFsaWRhdGlvbkVycm9yIGV4dGVuZHMgRmxhZ3NFcnJvciB7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZykge1xuICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBWYWxpZGF0aW9uRXJyb3IucHJvdG90eXBlKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgRHVwbGljYXRlT3B0aW9uIGV4dGVuZHMgVmFsaWRhdGlvbkVycm9yIHtcbiAgY29uc3RydWN0b3IobmFtZTogc3RyaW5nKSB7XG4gICAgc3VwZXIoXG4gICAgICBgT3B0aW9uIFwiJHtcbiAgICAgICAgZ2V0RmxhZyhuYW1lKS5yZXBsYWNlKC9eLS1uby0vLCBcIi0tXCIpXG4gICAgICB9XCIgY2FuIG9ubHkgb2NjdXIgb25jZSwgYnV0IHdhcyBmb3VuZCBzZXZlcmFsIHRpbWVzLmAsXG4gICAgKTtcbiAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgRHVwbGljYXRlT3B0aW9uLnByb3RvdHlwZSk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEludmFsaWRPcHRpb24gZXh0ZW5kcyBWYWxpZGF0aW9uRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihvcHRpb246IHN0cmluZywgb3B0aW9uczogQXJyYXk8SUZsYWdPcHRpb25zPikge1xuICAgIHN1cGVyKFxuICAgICAgYEludmFsaWQgb3B0aW9uIFwiJHtnZXRGbGFnKG9wdGlvbil9XCIuJHtcbiAgICAgICAgZGlkWW91TWVhbk9wdGlvbihvcHRpb24sIG9wdGlvbnMpXG4gICAgICB9YCxcbiAgICApO1xuICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBJbnZhbGlkT3B0aW9uLnByb3RvdHlwZSk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFVua25vd25PcHRpb24gZXh0ZW5kcyBWYWxpZGF0aW9uRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihvcHRpb246IHN0cmluZywgb3B0aW9uczogQXJyYXk8SUZsYWdPcHRpb25zPikge1xuICAgIHN1cGVyKFxuICAgICAgYFVua25vd24gb3B0aW9uIFwiJHtnZXRGbGFnKG9wdGlvbil9XCIuJHtcbiAgICAgICAgZGlkWW91TWVhbk9wdGlvbihvcHRpb24sIG9wdGlvbnMpXG4gICAgICB9YCxcbiAgICApO1xuICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBVbmtub3duT3B0aW9uLnByb3RvdHlwZSk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIE1pc3NpbmdPcHRpb25WYWx1ZSBleHRlbmRzIFZhbGlkYXRpb25FcnJvciB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbjogc3RyaW5nKSB7XG4gICAgc3VwZXIoYE1pc3NpbmcgdmFsdWUgZm9yIG9wdGlvbiBcIiR7Z2V0RmxhZyhvcHRpb24pfVwiLmApO1xuICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBNaXNzaW5nT3B0aW9uVmFsdWUucHJvdG90eXBlKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgSW52YWxpZE9wdGlvblZhbHVlIGV4dGVuZHMgVmFsaWRhdGlvbkVycm9yIHtcbiAgY29uc3RydWN0b3Iob3B0aW9uOiBzdHJpbmcsIGV4cGVjdGVkOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpIHtcbiAgICBzdXBlcihcbiAgICAgIGBPcHRpb24gXCIke1xuICAgICAgICBnZXRGbGFnKG9wdGlvbilcbiAgICAgIH1cIiBtdXN0IGJlIG9mIHR5cGUgXCIke2V4cGVjdGVkfVwiLCBidXQgZ290IFwiJHt2YWx1ZX1cIi5gLFxuICAgICk7XG4gICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIEludmFsaWRPcHRpb25WYWx1ZS5wcm90b3R5cGUpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBPcHRpb25Ob3RDb21iaW5hYmxlIGV4dGVuZHMgVmFsaWRhdGlvbkVycm9yIHtcbiAgY29uc3RydWN0b3Iob3B0aW9uOiBzdHJpbmcpIHtcbiAgICBzdXBlcihgT3B0aW9uIFwiJHtnZXRGbGFnKG9wdGlvbil9XCIgY2Fubm90IGJlIGNvbWJpbmVkIHdpdGggb3RoZXIgb3B0aW9ucy5gKTtcbiAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgT3B0aW9uTm90Q29tYmluYWJsZS5wcm90b3R5cGUpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBDb25mbGljdGluZ09wdGlvbiBleHRlbmRzIFZhbGlkYXRpb25FcnJvciB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbjogc3RyaW5nLCBjb25mbGljdGluZ09wdGlvbjogc3RyaW5nKSB7XG4gICAgc3VwZXIoXG4gICAgICBgT3B0aW9uIFwiJHtnZXRGbGFnKG9wdGlvbil9XCIgY29uZmxpY3RzIHdpdGggb3B0aW9uIFwiJHtcbiAgICAgICAgZ2V0RmxhZyhjb25mbGljdGluZ09wdGlvbilcbiAgICAgIH1cIi5gLFxuICAgICk7XG4gICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIENvbmZsaWN0aW5nT3B0aW9uLnByb3RvdHlwZSk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIERlcGVuZGluZ09wdGlvbiBleHRlbmRzIFZhbGlkYXRpb25FcnJvciB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbjogc3RyaW5nLCBkZXBlbmRpbmdPcHRpb246IHN0cmluZykge1xuICAgIHN1cGVyKFxuICAgICAgYE9wdGlvbiBcIiR7Z2V0RmxhZyhvcHRpb24pfVwiIGRlcGVuZHMgb24gb3B0aW9uIFwiJHtcbiAgICAgICAgZ2V0RmxhZyhkZXBlbmRpbmdPcHRpb24pXG4gICAgICB9XCIuYCxcbiAgICApO1xuICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBEZXBlbmRpbmdPcHRpb24ucHJvdG90eXBlKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgTWlzc2luZ1JlcXVpcmVkT3B0aW9uIGV4dGVuZHMgVmFsaWRhdGlvbkVycm9yIHtcbiAgY29uc3RydWN0b3Iob3B0aW9uOiBzdHJpbmcpIHtcbiAgICBzdXBlcihgTWlzc2luZyByZXF1aXJlZCBvcHRpb24gXCIke2dldEZsYWcob3B0aW9uKX1cIi5gKTtcbiAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgTWlzc2luZ1JlcXVpcmVkT3B0aW9uLnByb3RvdHlwZSk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFJlcXVpcmVkQXJndW1lbnRGb2xsb3dzT3B0aW9uYWxBcmd1bWVudCBleHRlbmRzIFZhbGlkYXRpb25FcnJvciB7XG4gIGNvbnN0cnVjdG9yKGFyZzogc3RyaW5nKSB7XG4gICAgc3VwZXIoXG4gICAgICBgQW4gcmVxdWlyZWQgYXJndW1lbnQgY2Fubm90IGZvbGxvdyBhbiBvcHRpb25hbCBhcmd1bWVudCwgYnV0IFwiJHthcmd9XCIgIGlzIGRlZmluZWQgYXMgcmVxdWlyZWQuYCxcbiAgICApO1xuICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihcbiAgICAgIHRoaXMsXG4gICAgICBSZXF1aXJlZEFyZ3VtZW50Rm9sbG93c09wdGlvbmFsQXJndW1lbnQucHJvdG90eXBlLFxuICAgICk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEFyZ3VtZW50Rm9sbG93c1ZhcmlhZGljQXJndW1lbnQgZXh0ZW5kcyBWYWxpZGF0aW9uRXJyb3Ige1xuICBjb25zdHJ1Y3Rvcihhcmc6IHN0cmluZykge1xuICAgIHN1cGVyKGBBbiBhcmd1bWVudCBjYW5ub3QgZm9sbG93IGFuIHZhcmlhZGljIGFyZ3VtZW50LCBidXQgZ290IFwiJHthcmd9XCIuYCk7XG4gICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIEFyZ3VtZW50Rm9sbG93c1ZhcmlhZGljQXJndW1lbnQucHJvdG90eXBlKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgTm9Bcmd1bWVudHMgZXh0ZW5kcyBWYWxpZGF0aW9uRXJyb3Ige1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcihgTm8gYXJndW1lbnRzLmApO1xuICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBOb0FyZ3VtZW50cy5wcm90b3R5cGUpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBJbnZhbGlkVHlwZUVycm9yIGV4dGVuZHMgVmFsaWRhdGlvbkVycm9yIHtcbiAgY29uc3RydWN0b3IoXG4gICAgeyBsYWJlbCwgbmFtZSwgdmFsdWUsIHR5cGUgfTogSVR5cGVJbmZvLFxuICAgIGV4cGVjdGVkPzogQXJyYXk8c3RyaW5nIHwgbnVtYmVyPixcbiAgKSB7XG4gICAgc3VwZXIoXG4gICAgICBgJHtsYWJlbH0gXCIke25hbWV9XCIgbXVzdCBiZSBvZiB0eXBlIFwiJHt0eXBlfVwiLCBidXQgZ290IFwiJHt2YWx1ZX1cIi5gICsgKFxuICAgICAgICBleHBlY3RlZFxuICAgICAgICAgID8gYCBFeHBlY3RlZCB2YWx1ZXM6ICR7XG4gICAgICAgICAgICBleHBlY3RlZC5tYXAoKHZhbHVlKSA9PiBgXCIke3ZhbHVlfVwiYCkuam9pbihcIiwgXCIpXG4gICAgICAgICAgfWBcbiAgICAgICAgICA6IFwiXCJcbiAgICAgICksXG4gICAgKTtcbiAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgTWlzc2luZ09wdGlvblZhbHVlLnByb3RvdHlwZSk7XG4gIH1cbn1cbiJdfQ==