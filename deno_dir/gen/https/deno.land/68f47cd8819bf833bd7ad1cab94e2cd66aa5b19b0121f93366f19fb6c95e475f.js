import { distance } from "../_utils/distance.ts";
/** Convert param case string to camel case. */ export function paramCaseToCamelCase(str) {
    return str.replace(/-([a-z])/g, (g)=>g[1].toUpperCase());
}
/** Convert underscore case string to camel case. */ export function underscoreToCamelCase(str) {
    return str.replace(/([a-z])([A-Z])/g, "$1_$2").toLowerCase().replace(/_([a-z])/g, (g)=>g[1].toUpperCase());
}
/**
 * Find option by flag, name or alias.
 *
 * @param flags Source options array.
 * @param name  Name of the option.
 */ export function getOption(flags, name) {
    while(name[0] === "-"){
        name = name.slice(1);
    }
    for (const flag of flags){
        if (isOption(flag, name)) {
            return flag;
        }
    }
    return;
}
export function didYouMeanOption(option, options) {
    const optionNames = options.map((option)=>[
            option.name,
            ...option.aliases ?? []
        ]).flat().map((option)=>getFlag(option));
    return didYouMean(" Did you mean option", getFlag(option), optionNames);
}
export function didYouMeanType(type, types) {
    return didYouMean(" Did you mean type", type, types);
}
export function didYouMean(message, type, types) {
    const match = closest(type, types);
    return match ? `${message} "${match}"?` : "";
}
export function getFlag(name) {
    if (name.startsWith("-")) {
        return name;
    }
    if (name.length > 1) {
        return `--${name}`;
    }
    return `-${name}`;
}
/**
 * Check if option has name or alias.
 *
 * @param option    The option to check.
 * @param name      The option name or alias.
 */ function isOption(option, name) {
    return option.name === name || option.aliases && option.aliases.indexOf(name) !== -1;
}
export function matchWildCardOptions(name, flags) {
    for (const option of flags){
        if (option.name.indexOf("*") === -1) {
            continue;
        }
        let matched = matchWildCardOption(name, option);
        if (matched) {
            matched = {
                ...matched,
                name
            };
            flags.push(matched);
            return matched;
        }
    }
}
function matchWildCardOption(name, option) {
    const parts = option.name.split(".");
    const parts2 = name.split(".");
    if (parts.length !== parts2.length) {
        return false;
    }
    const count = Math.max(parts.length, parts2.length);
    for(let i = 0; i < count; i++){
        if (parts[i] !== parts2[i] && parts[i] !== "*") {
            return false;
        }
    }
    return option;
}
function closest(str, arr) {
    let minDistance = Infinity;
    let minIndex = 0;
    for(let i = 0; i < arr.length; i++){
        const dist = distance(str, arr[i]);
        if (dist < minDistance) {
            minDistance = dist;
            minIndex = i;
        }
    }
    return arr[minIndex];
}
export function getDefaultValue(option) {
    return typeof option.default === "function" ? option.default() : option.default;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImh0dHBzOi8vZGVuby5sYW5kL3gvY2xpZmZ5QHYwLjI1LjAvZmxhZ3MvX3V0aWxzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgSUZsYWdPcHRpb25zIH0gZnJvbSBcIi4vdHlwZXMudHNcIjtcbmltcG9ydCB7IGRpc3RhbmNlIH0gZnJvbSBcIi4uL191dGlscy9kaXN0YW5jZS50c1wiO1xuXG4vKiogQ29udmVydCBwYXJhbSBjYXNlIHN0cmluZyB0byBjYW1lbCBjYXNlLiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcmFtQ2FzZVRvQ2FtZWxDYXNlKHN0cjogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKFxuICAgIC8tKFthLXpdKS9nLFxuICAgIChnKSA9PiBnWzFdLnRvVXBwZXJDYXNlKCksXG4gICk7XG59XG5cbi8qKiBDb252ZXJ0IHVuZGVyc2NvcmUgY2FzZSBzdHJpbmcgdG8gY2FtZWwgY2FzZS4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1bmRlcnNjb3JlVG9DYW1lbENhc2Uoc3RyOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gc3RyXG4gICAgLnJlcGxhY2UoLyhbYS16XSkoW0EtWl0pL2csIFwiJDFfJDJcIilcbiAgICAudG9Mb3dlckNhc2UoKVxuICAgIC5yZXBsYWNlKFxuICAgICAgL18oW2Etel0pL2csXG4gICAgICAoZykgPT4gZ1sxXS50b1VwcGVyQ2FzZSgpLFxuICAgICk7XG59XG5cbi8qKlxuICogRmluZCBvcHRpb24gYnkgZmxhZywgbmFtZSBvciBhbGlhcy5cbiAqXG4gKiBAcGFyYW0gZmxhZ3MgU291cmNlIG9wdGlvbnMgYXJyYXkuXG4gKiBAcGFyYW0gbmFtZSAgTmFtZSBvZiB0aGUgb3B0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0T3B0aW9uPE8gZXh0ZW5kcyBJRmxhZ09wdGlvbnM+KFxuICBmbGFnczogQXJyYXk8Tz4sXG4gIG5hbWU6IHN0cmluZyxcbik6IE8gfCB1bmRlZmluZWQge1xuICB3aGlsZSAobmFtZVswXSA9PT0gXCItXCIpIHtcbiAgICBuYW1lID0gbmFtZS5zbGljZSgxKTtcbiAgfVxuXG4gIGZvciAoY29uc3QgZmxhZyBvZiBmbGFncykge1xuICAgIGlmIChpc09wdGlvbihmbGFnLCBuYW1lKSkge1xuICAgICAgcmV0dXJuIGZsYWc7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGlkWW91TWVhbk9wdGlvbihcbiAgb3B0aW9uOiBzdHJpbmcsXG4gIG9wdGlvbnM6IEFycmF5PElGbGFnT3B0aW9ucz4sXG4pOiBzdHJpbmcge1xuICBjb25zdCBvcHRpb25OYW1lcyA9IG9wdGlvbnNcbiAgICAubWFwKChvcHRpb24pID0+IFtvcHRpb24ubmFtZSwgLi4uKG9wdGlvbi5hbGlhc2VzID8/IFtdKV0pXG4gICAgLmZsYXQoKVxuICAgIC5tYXAoKG9wdGlvbikgPT4gZ2V0RmxhZyhvcHRpb24pKTtcbiAgcmV0dXJuIGRpZFlvdU1lYW4oXCIgRGlkIHlvdSBtZWFuIG9wdGlvblwiLCBnZXRGbGFnKG9wdGlvbiksIG9wdGlvbk5hbWVzKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRpZFlvdU1lYW5UeXBlKHR5cGU6IHN0cmluZywgdHlwZXM6IEFycmF5PHN0cmluZz4pOiBzdHJpbmcge1xuICByZXR1cm4gZGlkWW91TWVhbihcIiBEaWQgeW91IG1lYW4gdHlwZVwiLCB0eXBlLCB0eXBlcyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkaWRZb3VNZWFuKFxuICBtZXNzYWdlOiBzdHJpbmcsXG4gIHR5cGU6IHN0cmluZyxcbiAgdHlwZXM6IEFycmF5PHN0cmluZz4sXG4pOiBzdHJpbmcge1xuICBjb25zdCBtYXRjaDogc3RyaW5nIHwgdW5kZWZpbmVkID0gY2xvc2VzdCh0eXBlLCB0eXBlcyk7XG4gIHJldHVybiBtYXRjaCA/IGAke21lc3NhZ2V9IFwiJHttYXRjaH1cIj9gIDogXCJcIjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEZsYWcobmFtZTogc3RyaW5nKSB7XG4gIGlmIChuYW1lLnN0YXJ0c1dpdGgoXCItXCIpKSB7XG4gICAgcmV0dXJuIG5hbWU7XG4gIH1cbiAgaWYgKG5hbWUubGVuZ3RoID4gMSkge1xuICAgIHJldHVybiBgLS0ke25hbWV9YDtcbiAgfVxuICByZXR1cm4gYC0ke25hbWV9YDtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBvcHRpb24gaGFzIG5hbWUgb3IgYWxpYXMuXG4gKlxuICogQHBhcmFtIG9wdGlvbiAgICBUaGUgb3B0aW9uIHRvIGNoZWNrLlxuICogQHBhcmFtIG5hbWUgICAgICBUaGUgb3B0aW9uIG5hbWUgb3IgYWxpYXMuXG4gKi9cbmZ1bmN0aW9uIGlzT3B0aW9uKG9wdGlvbjogSUZsYWdPcHRpb25zLCBuYW1lOiBzdHJpbmcpIHtcbiAgcmV0dXJuIG9wdGlvbi5uYW1lID09PSBuYW1lIHx8XG4gICAgKG9wdGlvbi5hbGlhc2VzICYmIG9wdGlvbi5hbGlhc2VzLmluZGV4T2YobmFtZSkgIT09IC0xKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1hdGNoV2lsZENhcmRPcHRpb25zKFxuICBuYW1lOiBzdHJpbmcsXG4gIGZsYWdzOiBBcnJheTxJRmxhZ09wdGlvbnM+LFxuKTogSUZsYWdPcHRpb25zIHwgdW5kZWZpbmVkIHtcbiAgZm9yIChjb25zdCBvcHRpb24gb2YgZmxhZ3MpIHtcbiAgICBpZiAob3B0aW9uLm5hbWUuaW5kZXhPZihcIipcIikgPT09IC0xKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgbGV0IG1hdGNoZWQgPSBtYXRjaFdpbGRDYXJkT3B0aW9uKG5hbWUsIG9wdGlvbik7XG4gICAgaWYgKG1hdGNoZWQpIHtcbiAgICAgIG1hdGNoZWQgPSB7IC4uLm1hdGNoZWQsIG5hbWUgfTtcbiAgICAgIGZsYWdzLnB1c2gobWF0Y2hlZCk7XG4gICAgICByZXR1cm4gbWF0Y2hlZDtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gbWF0Y2hXaWxkQ2FyZE9wdGlvbihcbiAgbmFtZTogc3RyaW5nLFxuICBvcHRpb246IElGbGFnT3B0aW9ucyxcbik6IElGbGFnT3B0aW9ucyB8IGZhbHNlIHtcbiAgY29uc3QgcGFydHMgPSBvcHRpb24ubmFtZS5zcGxpdChcIi5cIik7XG4gIGNvbnN0IHBhcnRzMiA9IG5hbWUuc3BsaXQoXCIuXCIpO1xuICBpZiAocGFydHMubGVuZ3RoICE9PSBwYXJ0czIubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGNvbnN0IGNvdW50ID0gTWF0aC5tYXgocGFydHMubGVuZ3RoLCBwYXJ0czIubGVuZ3RoKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XG4gICAgaWYgKHBhcnRzW2ldICE9PSBwYXJ0czJbaV0gJiYgcGFydHNbaV0gIT09IFwiKlwiKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiBvcHRpb247XG59XG5cbmZ1bmN0aW9uIGNsb3Nlc3Qoc3RyOiBzdHJpbmcsIGFycjogc3RyaW5nW10pOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICBsZXQgbWluRGlzdGFuY2UgPSBJbmZpbml0eTtcbiAgbGV0IG1pbkluZGV4ID0gMDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBkaXN0ID0gZGlzdGFuY2Uoc3RyLCBhcnJbaV0pO1xuICAgIGlmIChkaXN0IDwgbWluRGlzdGFuY2UpIHtcbiAgICAgIG1pbkRpc3RhbmNlID0gZGlzdDtcbiAgICAgIG1pbkluZGV4ID0gaTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGFyclttaW5JbmRleF07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXREZWZhdWx0VmFsdWUob3B0aW9uOiBJRmxhZ09wdGlvbnMpOiB1bmtub3duIHtcbiAgcmV0dXJuIHR5cGVvZiBvcHRpb24uZGVmYXVsdCA9PT0gXCJmdW5jdGlvblwiXG4gICAgPyBvcHRpb24uZGVmYXVsdCgpXG4gICAgOiBvcHRpb24uZGVmYXVs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