import { Command } from "../command.ts";
import { UnknownCommand } from "../_errors.ts";
import { CommandType } from "../types/command.ts";
/** Generates well formatted and colored help output for specified command. */ export class HelpCommand extends Command {
    constructor(cmd){
        super();
        return this.type("command", new CommandType()).arguments("[command:command]").description("Show this help or the help of a sub-command.").action(async (_, name)=>{
            if (!cmd) {
                cmd = name ? this.getGlobalParent()?.getBaseCommand(name) : this.getGlobalParent();
            }
            if (!cmd) {
                const cmds = this.getGlobalParent()?.getCommands();
                throw new UnknownCommand(name ?? "", cmds ?? [], [
                    this.getName(),
                    ...this.getAliases(), 
                ]);
            }
            await cmd.checkVersion();
            cmd.showHelp();
            Deno.exit(0);
        });
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImh0dHBzOi8vZGVuby5sYW5kL3gvY2xpZmZ5QHYwLjI0LjIvY29tbWFuZC9oZWxwL21vZC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21tYW5kIH0gZnJvbSBcIi4uL2NvbW1hbmQudHNcIjtcbmltcG9ydCB7IFVua25vd25Db21tYW5kIH0gZnJvbSBcIi4uL19lcnJvcnMudHNcIjtcbmltcG9ydCB7IENvbW1hbmRUeXBlIH0gZnJvbSBcIi4uL3R5cGVzL2NvbW1hbmQudHNcIjtcblxuLyoqIEdlbmVyYXRlcyB3ZWxsIGZvcm1hdHRlZCBhbmQgY29sb3JlZCBoZWxwIG91dHB1dCBmb3Igc3BlY2lmaWVkIGNvbW1hbmQuICovXG5leHBvcnQgY2xhc3MgSGVscENvbW1hbmRcbiAgZXh0ZW5kcyBDb21tYW5kPHZvaWQsIHZvaWQsIHZvaWQsIFtjb21tYW5kTmFtZT86IENvbW1hbmRUeXBlXT4ge1xuICBwdWJsaWMgY29uc3RydWN0b3IoY21kPzogQ29tbWFuZCkge1xuICAgIHN1cGVyKCk7XG4gICAgcmV0dXJuIHRoaXNcbiAgICAgIC50eXBlKFwiY29tbWFuZFwiLCBuZXcgQ29tbWFuZFR5cGUoKSlcbiAgICAgIC5hcmd1bWVudHMoXCJbY29tbWFuZDpjb21tYW5kXVwiKVxuICAgICAgLmRlc2NyaXB0aW9uKFwiU2hvdyB0aGlzIGhlbHAgb3IgdGhlIGhlbHAgb2YgYSBzdWItY29tbWFuZC5cIilcbiAgICAgIC5hY3Rpb24oYXN5bmMgKF8sIG5hbWU/OiBzdHJpbmcpID0+IHtcbiAgICAgICAgaWYgKCFjbWQpIHtcbiAgICAgICAgICBjbWQgPSBuYW1lXG4gICAgICAgICAgICA/IHRoaXMuZ2V0R2xvYmFsUGFyZW50KCk/LmdldEJhc2VDb21tYW5kKG5hbWUpXG4gICAgICAgICAgICA6IHRoaXMuZ2V0R2xvYmFsUGFyZW50KCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFjbWQpIHtcbiAgICAgICAgICBjb25zdCBjbWRzID0gdGhpcy5nZXRHbG9iYWxQYXJlbnQoKT8uZ2V0Q29tbWFuZHMoKTtcbiAgICAgICAgICB0aHJvdyBuZXcgVW5rbm93bkNvbW1hbmQobmFtZSA/PyBcIlwiLCBjbWRzID8/IFtdLCBbXG4gICAgICAgICAgICB0aGlzLmdldE5hbWUoKSxcbiAgICAgICAgICAgIC4uLnRoaXMuZ2V0QWxpYXNlcygpLFxuICAgICAgICAgIF0pO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IGNtZC5jaGVja1ZlcnNpb24oKTtcbiAgICAgICAgY21kLnNob3dIZWxwKCk7XG4gICAgICAgIERlbm8uZXhpdCgwKTtcbiAgICAgIH0pO1xuICB9XG59XG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsU0FBUyxPQUFPLFFBQVEsZUFBZSxDQUFDO0FBQ3hDLFNBQVMsY0FBYyxRQUFRLGVBQWUsQ0FBQztBQUMvQyxTQUFTLFdBQVcsUUFBUSxxQkFBcUIsQ0FBQztBQUVsRCw4RUFBOEUsQ0FDOUUsT0FBTyxNQUFNLFdBQVcsU0FDZCxPQUFPO0lBQ2YsWUFBbUIsR0FBYSxDQUFFO1FBQ2hDLEtBQUssRUFBRSxDQUFDO1FBQ1IsT0FBTyxJQUFJLENBQ1IsSUFBSSxDQUFDLFNBQVMsRUFBRSxJQUFJLFdBQVcsRUFBRSxDQUFDLENBQ2xDLFNBQVMsQ0FBQyxtQkFBbUIsQ0FBQyxDQUM5QixXQUFXLENBQUMsOENBQThDLENBQUMsQ0FDM0QsTUFBTSxDQUFDLE9BQU8sQ0FBQyxFQUFFLElBQWEsR0FBSztZQUNsQyxJQUFJLENBQUMsR0FBRyxFQUFFO2dCQUNSLEdBQUcsR0FBRyxJQUFJLEdBQ04sSUFBSSxDQUFDLGVBQWUsRUFBRSxFQUFFLGNBQWMsQ0FBQyxJQUFJLENBQUMsR0FDNUMsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDO2FBQzVCO1lBQ0QsSUFBSSxDQUFDLEdBQUcsRUFBRTtnQkFDUixNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsZUFBZSxFQUFFLEVBQUUsV0FBVyxFQUFFLEFBQUM7Z0JBQ25ELE1BQU0sSUFBSSxjQUFjLENBQUMsSUFBSSxJQUFJLEVBQUUsRUFBRSxJQUFJLElBQUksRUFBRSxFQUFFO29CQUMvQyxJQUFJLENBQUMsT0FBTyxFQUFFO3VCQUNYLElBQUksQ0FBQyxVQUFVLEVBQUU7aUJBQ3JCLENBQUMsQ0FBQzthQUNKO1lBQ0QsTUFBTSxHQUFHLENBQUMsWUFBWSxFQUFFLENBQUM7WUFDekIsR0FBRyxDQUFDLFFBQVEsRUFBRSxDQUFDO1lBQ2YsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUNkLENBQUMsQ0FBQztLQUNOO0NBQ0YifQ==