import { getDescription } from "../_utils.ts";
import { FileType } from "../types/file.ts";
/** Fish completions generator. */ export class FishCompletionsGenerator {
    /** Generates fish completions script for given command. */ static generate(cmd) {
        return new FishCompletionsGenerator(cmd).generate();
    }
    constructor(cmd){
        this.cmd = cmd;
    }
    /** Generates fish completions script. */ generate() {
        const path = this.cmd.getPath();
        const version = this.cmd.getVersion() ? ` v${this.cmd.getVersion()}` : "";
        return `#!/usr/bin/env fish
# fish completion support for ${path}${version}

function __fish_${replaceSpecialChars(this.cmd.getName())}_using_command
  set -l cmds ${getCommandFnNames(this.cmd).join(" ")}
  set -l words (commandline -opc)
  set -l cmd "_"
  for word in $words
    switch $word
      case '-*'
        continue
      case '*'
        set word (string replace -r -a '\\W' '_' $word)
        set -l cmd_tmp $cmd"_$word"
        if contains $cmd_tmp $cmds
          set cmd $cmd_tmp
        end
    end
  end
  if test "$cmd" = "$argv[1]"
    return 0
  end
  return 1
end

${this.generateCompletions(this.cmd).trim()}`;
    }
    generateCompletions(command) {
        const parent = command.getParent();
        let result = ``;
        if (parent) {
            // command
            result += "\n" + this.complete(parent, {
                description: command.getShortDescription(),
                arguments: command.getName()
            });
        }
        // arguments
        const commandArgs = command.getArguments();
        if (commandArgs.length) {
            result += "\n" + this.complete(command, {
                arguments: commandArgs.length ? this.getCompletionCommand(command, commandArgs[0]) : undefined
            });
        }
        // options
        for (const option of command.getOptions(false)){
            result += "\n" + this.completeOption(command, option);
        }
        for (const subCommand of command.getCommands(false)){
            result += this.generateCompletions(subCommand);
        }
        return result;
    }
    completeOption(command, option) {
        const shortOption = option.flags.find((flag)=>flag.length === 2)?.replace(/^(-)+/, "");
        const longOption = option.flags.find((flag)=>flag.length > 2)?.replace(/^(-)+/, "");
        return this.complete(command, {
            description: getDescription(option.description),
            shortOption: shortOption,
            longOption: longOption,
            // required: option.requiredValue,
            required: true,
            standalone: option.standalone,
            arguments: option.args.length ? this.getCompletionCommand(command, option.args[0]) : undefined
        });
    }
    complete(command, options) {
        const cmd = [
            "complete"
        ];
        cmd.push("-c", this.cmd.getName());
        cmd.push("-n", `'__fish_${replaceSpecialChars(this.cmd.getName())}_using_command __${replaceSpecialChars(command.getPath())}'`);
        options.shortOption && cmd.push("-s", options.shortOption);
        options.longOption && cmd.push("-l", options.longOption);
        options.standalone && cmd.push("-x");
        cmd.push("-k");
        cmd.push("-f");
        if (options.arguments) {
            options.required && cmd.push("-r");
            cmd.push("-a", options.arguments);
        }
        options.description && cmd.push("-d", `'${getDescription(options.description, true)}'`);
        return cmd.join(" ");
    }
    getCompletionCommand(cmd, arg) {
        const type = cmd.getType(arg.type);
        if (type && type.handler instanceof FileType) {
            return `'(__fish_complete_path)'`;
        }
        return `'(${this.cmd.getName()} completions complete ${arg.action + " " + getCompletionsPath(cmd)})'`;
    }
    cmd;
}
function getCommandFnNames(cmd, cmds = []) {
    cmds.push(`__${replaceSpecialChars(cmd.getPath())}`);
    cmd.getCommands(false).forEach((command)=>{
        getCommandFnNames(command, cmds);
    });
    return cmds;
}
function getCompletionsPath(command) {
    return command.getPath().split(" ").slice(1).join(" ");
}
function replaceSpecialChars(str) {
    return str.replace(/[^a-zA-Z0-9]/g, "_");
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImh0dHBzOi8vZGVuby5sYW5kL3gvY2xpZmZ5QHYwLjI1LjAvY29tbWFuZC9jb21wbGV0aW9ucy9fZmlzaF9jb21wbGV0aW9uc19nZW5lcmF0b3IudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0RGVzY3JpcHRpb24gfSBmcm9tIFwiLi4vX3V0aWxzLnRzXCI7XG5pbXBvcnQgdHlwZSB7IENvbW1hbmQgfSBmcm9tIFwiLi4vY29tbWFuZC50c1wiO1xuaW1wb3J0IHR5cGUgeyBJQXJndW1lbnQsIElPcHRpb24gfSBmcm9tIFwiLi4vdHlwZXMudHNcIjtcbmltcG9ydCB7IEZpbGVUeXBlIH0gZnJvbSBcIi4uL3R5cGVzL2ZpbGUudHNcIjtcblxuLyoqIEdlbmVyYXRlcyBmaXNoIGNvbXBsZXRpb25zIHNjcmlwdC4gKi9cbmludGVyZmFjZSBDb21wbGV0ZU9wdGlvbnMge1xuICBkZXNjcmlwdGlvbj86IHN0cmluZztcbiAgc2hvcnRPcHRpb24/OiBzdHJpbmc7XG4gIGxvbmdPcHRpb24/OiBzdHJpbmc7XG4gIHJlcXVpcmVkPzogYm9vbGVhbjtcbiAgc3RhbmRhbG9uZT86IGJvb2xlYW47XG4gIGFyZ3VtZW50cz86IHN0cmluZztcbn1cblxuLyoqIEZpc2ggY29tcGxldGlvbnMgZ2VuZXJhdG9yLiAqL1xuZXhwb3J0IGNsYXNzIEZpc2hDb21wbGV0aW9uc0dlbmVyYXRvciB7XG4gIC8qKiBHZW5lcmF0ZXMgZmlzaCBjb21wbGV0aW9ucyBzY3JpcHQgZm9yIGdpdmVuIGNvbW1hbmQuICovXG4gIHB1YmxpYyBzdGF0aWMgZ2VuZXJhdGUoY21kOiBDb21tYW5kKSB7XG4gICAgcmV0dXJuIG5ldyBGaXNoQ29tcGxldGlvbnNHZW5lcmF0b3IoY21kKS5nZW5lcmF0ZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgY21kOiBDb21tYW5kKSB7fVxuXG4gIC8qKiBHZW5lcmF0ZXMgZmlzaCBjb21wbGV0aW9ucyBzY3JpcHQuICovXG4gIHByaXZhdGUgZ2VuZXJhdGUoKTogc3RyaW5nIHtcbiAgICBjb25zdCBwYXRoID0gdGhpcy5jbWQuZ2V0UGF0aCgpO1xuICAgIGNvbnN0IHZlcnNpb246IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY21kLmdldFZlcnNpb24oKVxuICAgICAgPyBgIHYke3RoaXMuY21kLmdldFZlcnNpb24oKX1gXG4gICAgICA6IFwiXCI7XG5cbiAgICByZXR1cm4gYCMhL3Vzci9iaW4vZW52IGZpc2hcbiMgZmlzaCBjb21wbGV0aW9uIHN1cHBvcnQgZm9yICR7cGF0aH0ke3ZlcnNpb259XG5cbmZ1bmN0aW9uIF9fZmlzaF8ke3JlcGxhY2VTcGVjaWFsQ2hhcnModGhpcy5jbWQuZ2V0TmFtZSgpKX1fdXNpbmdfY29tbWFuZFxuICBzZXQgLWwgY21kcyAke2dldENvbW1hbmRGbk5hbWVzKHRoaXMuY21kKS5qb2luKFwiIFwiKX1cbiAgc2V0IC1sIHdvcmRzIChjb21tYW5kbGluZSAtb3BjKVxuICBzZXQgLWwgY21kIFwiX1wiXG4gIGZvciB3b3JkIGluICR3b3Jkc1xuICAgIHN3aXRjaCAkd29yZFxuICAgICAgY2FzZSAnLSonXG4gICAgICAgIGNvbnRpbnVlXG4gICAgICBjYXNlICcqJ1xuICAgICAgICBzZXQgd29yZCAoc3RyaW5nIHJlcGxhY2UgLXIgLWEgJ1xcXFxXJyAnXycgJHdvcmQpXG4gICAgICAgIHNldCAtbCBjbWRfdG1wICRjbWRcIl8kd29yZFwiXG4gICAgICAgIGlmIGNvbnRhaW5zICRjbWRfdG1wICRjbWRzXG4gICAgICAgICAgc2V0IGNtZCAkY21kX3RtcFxuICAgICAgICBlbmRcbiAgICBlbmRcbiAgZW5kXG4gIGlmIHRlc3QgXCIkY21kXCIgPSBcIiRhcmd2WzFdXCJcbiAgICByZXR1cm4gMFxuICBlbmRcbiAgcmV0dXJuIDFcbmVuZFxuXG4ke3RoaXMuZ2VuZXJhdGVDb21wbGV0aW9ucyh0aGlzLmNtZCkudHJpbSgpfWA7XG4gIH1cblxuICBwcml2YXRlIGdlbmVyYXRlQ29tcGxldGlvbnMoY29tbWFuZDogQ29tbWFuZCk6IHN0cmluZyB7XG4gICAgY29uc3QgcGFyZW50OiBDb21tYW5kIHwgdW5kZWZpbmVkID0gY29tbWFuZC5nZXRQYXJlbnQoKTtcbiAgICBsZXQgcmVzdWx0ID0gYGA7XG5cbiAgICBpZiAocGFyZW50KSB7XG4gICAgICAvLyBjb21tYW5kXG4gICAgICByZXN1bHQgKz0gXCJcXG5cIiArIHRoaXMuY29tcGxldGUocGFyZW50LCB7XG4gICAgICAgIGRlc2NyaXB0aW9uOiBjb21tYW5kLmdldFNob3J0RGVzY3JpcHRpb24oKSxcbiAgICAgICAgYXJndW1lbnRzOiBjb21tYW5kLmdldE5hbWUoKSxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIGFyZ3VtZW50c1xuICAgIGNvbnN0IGNvbW1hbmRBcmdzID0gY29tbWFuZC5nZXRBcmd1bWVudHMoKTtcbiAgICBpZiAoY29tbWFuZEFyZ3MubGVuZ3RoKSB7XG4gICAgICByZXN1bHQgKz0gXCJcXG5cIiArIHRoaXMuY29tcGxldGUoY29tbWFuZCwge1xuICAgICAgICBhcmd1bWVudHM6IGNvbW1hbmRBcmdzLmxlbmd0aFxuICAgICAgICAgID8gdGhpcy5nZXRDb21wbGV0aW9uQ29tbWFuZChjb21tYW5kLCBjb21tYW5kQXJnc1swXSlcbiAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIG9wdGlvbnNcbiAgICBmb3IgKGNvbnN0IG9wdGlvbiBvZiBjb21tYW5kLmdldE9wdGlvbnMoZmFsc2UpKSB7XG4gICAgICByZXN1bHQgKz0gXCJcXG5cIiArIHRoaXMuY29tcGxldGVPcHRpb24oY29tbWFuZCwgb3B0aW9uKTtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IHN1YkNvbW1hbmQgb2YgY29tbWFuZC5nZXRDb21tYW5kcyhmYWxzZSkpIHtcbiAgICAgIHJlc3VsdCArPSB0aGlzLmdlbmVyYXRlQ29tcGxldGlvbnMoc3ViQ29tbWFuZCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIHByaXZhdGUgY29tcGxldGVPcHRpb24oY29tbWFuZDogQ29tbWFuZCwgb3B0aW9uOiBJT3B0aW9uKSB7XG4gICAgY29uc3Qgc2hvcnRPcHRpb246IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbi5mbGFnc1xuICAgICAgLmZpbmQoKGZsYWcpID0+IGZsYWcubGVuZ3RoID09PSAyKVxuICAgICAgPy5yZXBsYWNlKC9eKC0pKy8sIFwiXCIpO1xuICAgIGNvbnN0IGxvbmdPcHRpb246IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbi5mbGFnc1xuICAgICAgLmZpbmQoKGZsYWcpID0+IGZsYWcubGVuZ3RoID4gMilcbiAgICAgID8ucmVwbGFjZSgvXigtKSsvLCBcIlwiKTtcblxuICAgIHJldHVybiB0aGlzLmNvbXBsZXRlKGNvbW1hbmQsIHtcbiAgICAgIGRlc2NyaXB0aW9uOiBnZXREZXNjcmlwdGlvbihvcHRpb24uZGVzY3JpcHRpb24pLFxuICAgICAgc2hvcnRPcHRpb246IHNob3J0T3B0aW9uLFxuICAgICAgbG9uZ09wdGlvbjogbG9uZ09wdGlvbixcbiAgICAgIC8vIHJlcXVpcmVkOiBvcHRpb24ucmVxdWlyZWRWYWx1ZSxcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgc3RhbmRhbG9uZTogb3B0aW9uLnN0YW5kYWxvbmUsXG4gICAgICBhcmd1bWVudHM6IG9wdGlvbi5hcmdzLmxlbmd0aFxuICAgICAgICA/IHRoaXMuZ2V0Q29tcGxldGlvbkNvbW1hbmQoY29tbWFuZCwgb3B0aW9uLmFyZ3NbMF0pXG4gICAgICAgIDogdW5kZWZpbmVkLFxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBjb21wbGV0ZShjb21tYW5kOiBDb21tYW5kLCBvcHRpb25zOiBDb21wbGV0ZU9wdGlvbnMpIHtcbiAgICBjb25zdCBjbWQgPSBbXCJjb21wbGV0ZVwiXTtcbiAgICBjbWQucHVzaChcIi1jXCIsIHRoaXMuY21kLmdldE5hbWUoKSk7XG4gICAgY21kLnB1c2goXG4gICAgICBcIi1uXCIsXG4gICAgICBgJ19fZmlzaF8ke3JlcGxhY2VTcGVjaWFsQ2hhcnModGhpcy5jbWQuZ2V0TmFtZSgpKX1fdXNpbmdfY29tbWFuZCBfXyR7XG4gICAgICAgIHJlcGxhY2VTcGVjaWFsQ2hhcnMoY29tbWFuZC5nZXRQYXRoKCkpXG4gICAgICB9J2AsXG4gICAgKTtcbiAgICBvcHRpb25zLnNob3J0T3B0aW9uICYmIGNtZC5wdXNoKFwiLXNcIiwgb3B0aW9ucy5zaG9ydE9wdGlvbik7XG4gICAgb3B0aW9ucy5sb25nT3B0aW9uICYmIGNtZC5wdXNoKFwiLWxcIiwgb3B0aW9ucy5sb25nT3B0aW9uKTtcbiAgICBvcHRpb25zLnN0YW5kYWxvbmUgJiYgY21kLnB1c2goXCIteFwiKTtcbiAgICBjbWQucHVzaChcIi1rXCIpO1xuICAgIGNtZC5wdXNoKFwiLWZcIik7XG4gICAgaWYgKG9wdGlvbnMuYXJndW1lbnRzKSB7XG4gICAgICBvcHRpb25zLnJlcXVpcmVkICYmIGNtZC5wdXNoKFwiLXJcIik7XG4gICAgICBjbWQucHVzaChcIi1hXCIsIG9wdGlvbnMuYXJndW1lbnRzKTtcbiAgICB9XG4gICAgb3B0aW9ucy5kZXNjcmlwdGlvbiAmJlxuICAgICAgY21kLnB1c2goXCItZFwiLCBgJyR7Z2V0RGVzY3JpcHRpb24ob3B0aW9ucy5kZXNjcmlwdGlvbiwgdHJ1ZSl9J2ApO1xuICAgIHJldHVybiBjbWQuam9pbihcIiBcIik7XG4gIH1cblxuICBwcml2YXRlIGdldENvbXBsZXRpb25Db21tYW5kKGNtZDogQ29tbWFuZCwgYXJnOiBJQXJndW1lbnQpOiBzdHJpbmcge1xuICAgIGNvbnN0IHR5cGUgPSBjbWQuZ2V0VHlwZShhcmcudHlwZSk7XG4gICAgaWYgKHR5cGUgJiYgdHlwZS5oYW5kbGVyIGluc3RhbmNlb2YgRmlsZVR5cGUpIHtcbiAgICAgIHJldHVybiBgJyhfX2Zpc2hfY29tcGxldGVfcGF0aCknYDtcbiAgICB9XG4gICAgcmV0dXJuIGAnKCR7dGhpcy5jbWQuZ2V0TmFtZSgpfSBjb21wbGV0aW9ucyBjb21wbGV0ZSAke1xuICAgICAgYXJnLmFjdGlvbiArIFwiIFwiICsgZ2V0Q29tcGxldGlvbnNQYXRoKGNtZClcbiAgICB9KSdgO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldENvbW1hbmRGbk5hbWVzKFxuICBjbWQ6IENvbW1hbmQsXG4gIGNtZHM6IEFycmF5PHN0cmluZz4gPSBbXSxcbik6IEFycmF5PHN0cmluZz4ge1xuICBjbWRzLnB1c2goYF9fJHtyZXBsYWNlU3BlY2lhbENoYXJzKGNtZC5nZXRQYXRoKCkpfWApO1xuICBjbWQuZ2V0Q29tbWFuZHMoZmFsc2UpLmZvckVhY2goKGNvbW1hbmQpID0+IHtcbiAgICBnZXRDb21tYW5kRm5OYW1lcyhjb21tYW5kLCBjbWRzKTtcbiAgfSk7XG4gIHJldHVybiBjbWRzO1xufVxuXG5mdW5jdGlvbiBnZXRDb21wbGV0aW9uc1BhdGgoY29tbWFuZDogQ29tbWFuZCk6IHN0cmluZyB7XG4gIHJldHVybiBjb21tYW5kLmdldFBhdGgoKVxuICAgIC5zcGxpdChcIiBcIilcbiAgICAuc2xpY2UoMSlcbiAgICAuam9pbihcIiBcIik7XG59XG5cbmZ1bmN0aW9uIHJlcGxhY2VTcGVjaWFsQ2hhcnMoc3RyOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gc3RyLnJlcGxhY2UoL1teYS16QS1aMC05XS9nLCBcIl9cIik7XG59XG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsU0FBUyxjQUFjLFFBQVEsY0FBYyxDQUFDO0FBRzlDLFNBQVMsUUFBUSxRQUFRLGtCQUFrQixDQUFDO0FBWTVDLGdDQUFnQyxHQUNoQyxPQUFPLE1BQU0sd0JBQXdCO0lBQ25DLHlEQUF5RCxVQUMzQyxRQUFRLENBQUMsR0FBWSxFQUFFO1FBQ25DLE9BQU8sSUFBSSx3QkFBd0IsQ0FBQyxHQUFHLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQztJQUN0RDtJQUVBLFlBQThCLEdBQVksQ0FBRTtRQUFkLFdBQUEsR0FBWSxDQUFBO0lBQUc7SUFFN0MsdUNBQXVDLEdBQy9C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