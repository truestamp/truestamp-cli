import { fromFileUrl } from "../path.ts";
const allowedModes = /^[0-7]{3}/;
export function chmod(path, mode, callback) {
    path = path instanceof URL ? fromFileUrl(path) : path;
    Deno.chmod(path, getResolvedMode(mode)).then(() => callback(null), callback);
}
export function chmodSync(path, mode) {
    path = path instanceof URL ? fromFileUrl(path) : path;
    Deno.chmodSync(path, getResolvedMode(mode));
}
function getResolvedMode(mode) {
    if (typeof mode === "number") {
        return mode;
    }
    if (typeof mode === "string" && !allowedModes.test(mode)) {
        throw new Error("Unrecognized mode: " + mode);
    }
    return parseInt(mode, 8);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiX2ZzX2NobW9kLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiX2ZzX2NobW9kLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxZQUFZLENBQUM7QUFFekMsTUFBTSxZQUFZLEdBQUcsV0FBVyxDQUFDO0FBTWpDLE1BQU0sVUFBVSxLQUFLLENBQ25CLElBQWtCLEVBQ2xCLElBQXFCLEVBQ3JCLFFBQTJCO0lBRTNCLElBQUksR0FBRyxJQUFJLFlBQVksR0FBRyxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztJQUV0RCxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxlQUFlLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxFQUFFLFFBQVEsQ0FBQyxDQUFDO0FBQy9FLENBQUM7QUFNRCxNQUFNLFVBQVUsU0FBUyxDQUFDLElBQWtCLEVBQUUsSUFBcUI7SUFDakUsSUFBSSxHQUFHLElBQUksWUFBWSxHQUFHLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDO0lBQ3RELElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxFQUFFLGVBQWUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0FBQzlDLENBQUM7QUFFRCxTQUFTLGVBQWUsQ0FBQyxJQUFxQjtJQUM1QyxJQUFJLE9BQU8sSUFBSSxLQUFLLFFBQVEsRUFBRTtRQUM1QixPQUFPLElBQUksQ0FBQztLQUNiO0lBRUQsSUFBSSxPQUFPLElBQUksS0FBSyxRQUFRLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFO1FBQ3hELE1BQU0sSUFBSSxLQUFLLENBQUMscUJBQXFCLEdBQUcsSUFBSSxDQUFDLENBQUM7S0FDL0M7SUFFRCxPQUFPLFFBQVEsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDM0IsQ0FBQyJ9